<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Monty Hall Problem Simulator</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
    <div class="container">
        <h1 style="cursor:pointer; display:flex; align-items:center; gap:8px;" id="descHeader">
            Monty Hall Problem Simulator
            <span id="arrow" style="transition:transform 0.3s; display:inline-block;">▼</span>
        </h1>

        <div id="description">
            <p class="desc">
                The Monty Hall problem is a probability puzzle based on a game show.
                There are three doors: behind one is a car (the prize), behind the other two are goats.
                You choose a door. The host, who knows where the car is, opens a different door to reveal a goat.
                You are then offered a choice: <strong>stay</strong> with your original door or <strong>switch</strong> to the other unopened door.
                Surprisingly, switching doubles your chances of winning — from 1/3 to 2/3.
            </p>
            <p class="desc">
                This simulator will generate <strong>random game trials</strong> based on your chosen number of simulations.
                For each trial, the program randomly places the car, records your initial choice, lets Monty open a goat door, and calculates the outcomes for both strategies (switch and stay).
                If "Show details table" is enabled, you'll see per-trial data including:
                <em>trial number, car location, your choice, Monty’s opened door, the switch choice, and whether each strategy won</em>.
                You can also export the full dataset as a CSV file for analysis.
            </p>
        </div>
        <div class="card controls">
            <label>
                Trials:
                <input type="number" id="trials" value="100" min="1" max="10000000" step="1" />
            </label>

            <label>
                <input type="checkbox" id="showDetails" checked>
                Show details table
            </label>

            <label>
                Max rows to display:
                <input type="number" id="maxRows" value="200" min="1" max="1000" step="1" title="Only this many rows will be shown in the table to keep the page responsive.">
            </label>
            <div class="controls-right">
                <button id="runBtn">Run Simulation</button>
                <button id="downloadBtn" class="secondary" title="Download full trial data as CSV">Export CSV</button>
            </div>
        </div>

        <div id="output" class="card" style="margin-top:12px;">
            <div class="summary" id="summaryArea">
                <div class="box"><strong>Total trials</strong><div id="totalTrials" class="small">—</div></div>
                <div class="box"><strong>Always switch wins</strong><div id="switchWins" class="small">—</div></div>
                <div class="box"><strong>Never switch wins</strong><div id="stayWins" class="small">—</div></div>
                <div class="box"><strong>Switch wins%</strong><div id="switchPct" class="small">—</div></div>
                <div class="box"><strong>Stay wins%</strong><div id="stayPct" class="small">—</div></div>
            </div>

            <div id="tableContainer" style="margin-top:12px;"></div>
            <div id="notice" class="notice"></div>
        </div>
        <div id="loading" style="display:none; margin-top:10px; text-align:center;">
            <div class="spinner"></div>
        </div>
        <div id="floatMessage" class="popUpMessage">
            Value too big, adjusted to max allowed.
        </div>
    </div>

    <script src="script.js" defer></script>
</body>
</html>
